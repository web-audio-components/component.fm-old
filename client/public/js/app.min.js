var app=app||{};app.views={},app.models={},app.collections={},app.templates={},app.config={},this.app=this.app||{},this.app.templates=this.app.templates||{},this.app.templates.index=function(e,t,n,r,i){return n=n||e.helpers,'<div class="row">\n  <h1>Welcome</h1>\n</div>\n\n'},this.app.templates.searchBar=function(e,t,n,r,i){return n=n||e.helpers,'<div class="row">\n  <form class="form-search">\n    <div class="input-prepend">\n      <span class="add-on"><i class="icon icon-search"></i></span>\n      <input type="search" class="search-query" id="search-bar" placeholder="plate delay"/>\n    </div>\n  </form>\n</div>\n'},this.app.templates.searchResults=function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+='\n      <li><a href="#">',s=n.name,s?i=s.call(e,{hash:{}}):(i=e.name,i=typeof i===a?i():i),r+=f(i)+"</a> - ",s=n.description,s?i=s.call(e,{hash:{}}):(i=e.description,i=typeof i===a?i():i),r+=f(i)+"</li>\n    ",r}n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<div class="row">\n  <h2>Results for ',u=n.query,u?o=u.call(t,{hash:{}}):(o=t.query,o=typeof o===a?o():o),s+=f(o)+'</h2>\n  <ul class="nav nav-tabs nav-stacked">\n    ',o=t.packages,o=n.each.call(t,o,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(o||o===0)s+=o;return s+="\n  </ul>\n</div>\n",s},function(){app.models.Package=Backbone.Model.extend({initialize:function(){}})}(),function(){app.collections.Packages=Backbone.Collection.extend({model:app.models.Package,url:"/packages",initialize:function(){}})}(),function(){var e=app.views.index,t=app.views.search,n=app.views.package,r=app.views.about,i=Backbone.Router.extend({routes:{"":"index","packages/search/:name":"search","packages/:package":"package",about:"about"},index:function(){$("#content > div").hide(),app.indexView.$el.show(),app.searchBarView.$el.show(),app.searchResultsView.$el.show()},search:function(){$("#content > div").hide(),app.searchResultsView.$el.show(),app.searchBarView.$el.show()}});app.router=new i}(),function(){app.views.View=Backbone.View.extend({render:function(e){$("#content").append(this.$el.html(this.template(e)))}})}(),function(){app.views.Index=app.views.View.extend({template:Handlebars.template(app.templates.index),className:"index-view",initialize:function(){},events:{}})}(),function(){app.views.SearchBar=app.views.View.extend({template:Handlebars.template(app.templates.searchBar),initialize:function(){},events:{"keyup #search-bar":"handleSearch"},handleSearch:function(e){var t=$(e.target).val();Backbone.history.navigate("packages/search/"+t,!0),this.trigger("query",t)}})}(),function(){app.views.SearchResults=app.views.View.extend({template:Handlebars.template(app.templates.searchResults),initialize:function(e){this.search=e.search,this.packages=new app.collections.Packages,this.packages.on("fetched",this.preRender,this),this.search.on("query",this.query,this),this.packages.fetch()},query:function(e){var t=this.packages;this.packages.query=e,this.packages.url="/packages/search/"+e,this.packages.fetch({success:function(e){t.trigger("fetched")}})},preRender:function(){console.log(this.packages.toJSON()),this.render({packages:this.packages.toJSON(),query:this.packages.query})}})}(),app.init=function(){app.indexView=new app.views.Index,app.searchBarView=new app.views.SearchBar,app.searchResultsView=new app.views.SearchResults({search:app.searchBarView}),app.searchBarView.render(),app.indexView.render(),app.searchResultsView.render()},$(function(){app.init.call(app),Backbone.history.start()});